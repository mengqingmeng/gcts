<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <link rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}" />
    <script th:src="@{/jquery-3.2.1.min.js}"></script>
    <script th:src="@{/bootstrap/js/bootstrap.js}"></script>
    <script th:src="@{/vue/vue.min.js}"></script>
    <script th:src="@{/vue/vue-resource.min.js}"></script>
    <title>ewg</title>
</head>
<body>

    <!--/*@thymesVar id="jobs" type=""*/-->
        <ul th:each="job :${jobs}" id="ewg">
            <!--/*@thymesVar id="name" type=""*/-->
            <li th:text="${job.name}"></li>
            <ul th:each="classify:${job.classifies}">
                <li th:text="${classify.type}"></li>
                <ul th:each="url:${classify.urls}">
                    <a th:text="${url.name}" th:attr="productType=${url.name}" v-on:click="scrapy()"></a>
                </ul>
            </ul>
        </ul>

    <script>
        var vm = new Vue({
            el:"#ewg",
            methods: {
                scrapy: function () {
                    var type = event.target.getAttribute('productType')

                    this.$http.post("/ewgProduct",{type:type},{emulateJSON:true}).then(
                        function (res) {
                            console.log(res.body)
                        },function (res) {
                            // 处理失败的结果
                        }
                    );
                }
            }
        });
    </script>
</body>
</html>